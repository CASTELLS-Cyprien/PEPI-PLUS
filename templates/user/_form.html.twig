{# templates/user/_form.html.twig #}
{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

<div class="bg-white shadow-sm rounded-xl border border-gray-200 overflow-hidden">
	<div class="p-8 space-y-6">
		{{ form_errors(form) }}

		{# Authentification #}
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			<div>
				{{ form_label(form.email, 'Email', {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
				{{ form_widget(form.email, {'attr': {'class': 'block w-full rounded-md border-gray-300 shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm'}}) }}
				{{ form_errors(form.email) }}
			</div>
			<div>
				{{ form_label(form.password, 'Modifier le mot de passe', {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
				{{ form_widget(form.password, {'attr': {'class': 'block w-full rounded-md border-gray-300 shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm'}}) }}
				{{ form_errors(form.password) }}
			</div>
		</div>

		{# Identité #}
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			<div>
				{{ form_label(form.firstName, 'Prénom', {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
				{{ form_widget(form.firstName, {'attr': {'class': 'block w-full rounded-md border-gray-300 shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm'}}) }}
				{{ form_errors(form.firstName) }}
			</div>
			<div>
				{{ form_label(form.lastName, 'Nom', {'label_attr': {'class': 'block text-sm font-semibold text-gray-700 mb-1'}}) }}
				{{ form_widget(form.lastName, {'attr': {'class': 'block w-full rounded-md border-gray-300 shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm'}}) }}
				{{ form_errors(form.lastName) }}
			</div>
		</div>

		{# Réinitialisation rapide #}
		<div class="p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start">
			<div class="flex items-center h-5">
				{{ form_widget(form.resetPassword, {'attr': {'class': 'h-4 w-4 text-amber-600 border-gray-300 rounded'}}) }}
			</div>
			<div class="ml-3 text-sm">
				{{ form_label(form.resetPassword, 'Réinitialiser le mot de passe (Password123!)', {'label_attr': {'class': 'font-bold text-amber-900'}}) }}
				<p class="text-amber-700 text-xs">L'utilisateur devra obligatoirement changer son mot de passe à sa prochaine connexion.</p>
			</div>
		</div>

		{# Rôles et Statut #}
		<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
			<div>
				<label class="block text-sm font-semibold text-gray-700 mb-3">Rôles</label>
				<div class="space-y-2 p-4 bg-gray-50 rounded-lg border border-gray-100">
					{% for role in form.roles %}
						<div class="flex items-center">
							{{ form_widget(role, {'attr': {'class': 'h-4 w-4 text-green-600 border-gray-300 rounded'}}) }}
							{{ form_label(role, null, {'label_attr': {'class': 'ml-2 text-sm text-gray-700 cursor-pointer'}}) }}
						</div>
					{% endfor %}
				</div>
			</div>
			<div>
				<label class="block text-sm font-semibold text-gray-700 mb-3">Statut</label>
				<div class="flex items-center p-4 bg-green-50 rounded-lg border border-green-100">
					{{ form_widget(form.isActive, {'attr': {'class': 'h-5 w-5 text-green-600 border-gray-300 rounded'}}) }}
					<div class="ml-3">
						<label for="{{ form.isActive.vars.id }}" class="text-sm font-bold text-green-900">Compte Actif</label>
					</div>
				</div>
			</div>
		</div>
	</div>

	{# Footer #}
	<div class="bg-gray-50 px-8 py-4 border-t border-gray-200 flex items-center justify-between">
		<a href="{{ path('app_user_index') }}" class="text-sm text-gray-500 hover:text-gray-700 font-medium">Annuler</a>
		<button type="submit" class="inline-flex justify-center py-2 px-8 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
			<twig:ux:icon name="bi:check-lg" class="w-5 h-5 mr-2"/>
			{{ button_label|default('Enregistrer les modifications') }}
		</button>
	</div>
</div>
{{ form_end(form) }}
