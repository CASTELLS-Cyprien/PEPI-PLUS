{% extends 'base.html.twig' %}

{% block title %}Tableau de Bord - Gestion de Stock
{% endblock %}

{% block body %}
	{# Initialisation des variables de calcul #}
	{% set total_quantity = 0 %}
	{% set low_stock_count = 0 %}
	{% set unique_plants = [] %}

	<div class="min-h-screen bg-gray-50 p-6">
		<div
			class="max-w-7xl mx-auto">
			{# En-tête #}
			<div class="flex justify-between items-center mb-8">
				<div>
					<h1 class="text-3xl font-bold text-gray-900">Tableau de Bord</h1>
					<p class="text-gray-600">État de vos stocks au
						{{ "now"|date("d/m/Y") }}</p>
				</div>
				<a href="{{ path('app_stock_newMyStock') }}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium shadow-sm flex items-center transition-colors">
					<twig:ux:icon	name="formkit:add"	class="w-5 h-5 inline mr-2" />
					Ajouter un stock
				</a>
			</div>

			{# Section 1: Indicateurs Clés (KPIs) #}
			<div
				class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
				{# Variétés #}
				<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
					<div class="text-xs font-semibold text-gray-400 uppercase mb-4">Variétés</div>
					<div class="text-3xl font-bold text-gray-900">{{ unique_plants|length }}</div>
					<div class="text-sm text-gray-500 mt-1">Espèces différentes</div>
				</div>

				{# Volume Global #}
				<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
					<div class="text-xs font-semibold text-gray-400 uppercase mb-4">Volume Global</div>
					<div class="text-3xl font-bold text-gray-900">{{ total_quantity }}</div>
					<div class="text-sm text-gray-500 mt-1">Unités cumulées</div>
				</div>

				{# Alertes #}
				<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
					<div class="text-xs font-semibold text-gray-400 uppercase mb-4 text-red-500">Alertes</div>
					<div class="text-3xl font-bold text-red-600">{{ low_stock_count }}</div>
					<div class="text-sm text-red-400 mt-1">Stocks < 5 unités</div>
				</div>

				{# Saison #}
				<div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
					<div class="text-xs font-semibold text-gray-400 uppercase mb-4">Saison</div>
					<div class="text-3xl font-bold text-gray-900">{{ "now"|date("Y") }}</div>
					<div class="text-sm text-gray-500 mt-1">Année en cours</div>
				</div>
			</div>

			<div
				class="grid grid-cols-1 lg:grid-cols-3 gap-8">
				{# Section 2: Tableau des Stocks #}
				<div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
					<div class="p-6 border-b border-gray-100">
						<h2 class="text-lg font-bold text-gray-900">Mouvements récents</h2>
					</div>
					<div class="overflow-x-auto">
						<table class="w-full text-left">
							<thead class="bg-gray-50 text-gray-500 text-xs uppercase">
								<tr>
									<th class="px-6 py-3">Plant</th>
									<th class="px-6 py-3">Conditionnement</th>
									<th class="px-6 py-3 text-right">Quantité</th>
								</tr>
							</thead>
							<tbody class="divide-y divide-gray-100">
								
							
							</tbody>
						</table>
					</div>
				</div>

				{# Section 3: Liens Rapides #}
				<div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
					<h2 class="text-lg font-bold text-gray-900 mb-6">Actions rapides</h2>
					<div class="space-y-4">
						<a href="{{ path('app_plant_newPartner') }}" class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-green-50 group transition-colors">
							<div class="p-2 bg-white rounded shadow-sm group-hover:text-green-600">
								<twig:ux:icon	name="formkit:add"	class="w-5 h-5 inline mr-2" />
							<span class="ml-3 text-sm font-medium text-gray-700">Créer un nouveau plant</span>
						</a>
						<a href="{{ path('app_stock_myStock') }}" class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-green-50 group transition-colors">
							<div class="p-2 bg-white rounded shadow-sm group-hover:text-green-600">
								<twig:ux:icon	name="formkit:add"	class="w-5 h-5 inline mr-2" />
							</div>
							<span class="ml-3 text-sm font-medium text-gray-700">Voir tout mon stock</span>
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
